[{attribute,{loc,[],0,0},module,scope_fun},
 {function,{loc,[],0,0},
           foo,1,
           [{fun_clause,{loc,[],0,0},
                        [{var,{loc,[],0,0},{local_bind,{'X',0}}}],
                        [],
                        [{'case',{loc,[],0,0},
                                 {'fun',{loc,[],0,0},
                                        no_name,
                                        [{fun_clause,{loc,[],0,0},
                                                     [{var,{loc,[],0,0},{local_bind,{'X',1}}}, {var,{loc,[],0,0},{local_ref,{'X',1}}}],
                                                     [],
                                                     [{op,{loc,[],0,0},'==',{var,{loc,[],0,0},{local_ref,{'X',1}}},{var,{loc,[],0,0},{local_ref,{'X',1}}}}]}]},
                                 [{case_clause,{loc,[],0,0},
                                               {var,{loc,[],0,0},{local_bind,{'F',0}}},
                                               [],
                                               [{'case',{loc,[],0,0},
                                                        {'fun',{loc,[],0,0},
                                                               {local_bind,{'F',1}},
                                                               [{fun_clause,{loc,[],0,0},
                                                                            [{var,{loc,[],0,0},{local_bind,{'X',1}}},{var,{loc,[],0,0},{local_ref,{'X',1}}}],
                                                                            [],
                                                                            [{op,{loc,[],0,0},
                                                                                 '==',
                                                                                 {var,{loc,[],0,0},{local_ref,{'X',1}}},
                                                                                 {call,{loc,[],0,0},{var,{loc,[],0,0},{local_ref,{'F',1}}},[{var,{loc,[],0,0},{local_ref,{'X',1}}}, {var,{loc,[],0,0},{local_ref,{'X',1}}}]}}]}]},
                                                        [{case_clause,{loc,[],0,0},
                                                                      {var,{loc,[],0,0},{local_bind,{'G',0}}},
                                                                      [],
                                                                      [{tuple,{loc,[],0,0},
                                                                              [{call,{loc,[],0,0},{var,{loc,[],0,0},{local_ref,{'F',0}}},[{var,{loc,[],0,0},{local_ref,{'X',0}}}, {var,{loc,[],0,0},{local_ref,{'X',0}}}]},
                                                                               {call,{loc,[],0,0},{var,{loc,[],0,0},{local_ref,{'G',0}}},[{var,{loc,[],0,0},{local_ref,{'X',0}}}, {var,{loc,[],0,0},{local_ref,{'X',0}}}]}]}]}]}]}]}]}]}].
